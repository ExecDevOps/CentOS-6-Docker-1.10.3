<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>CentOS 6.7 with Docker 1.10.3 by ExecDevOps</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">CentOS 6.7 with Docker 1.10.3</h1>
      <h2 class="project-tagline">How to make CentOS 6.7 capable of running a more recent version of Docker</h2>
      <a href="https://github.com/ExecDevOps/Docker-CentOS-6.7" class="btn">View on GitHub</a>
      <a href="https://github.com/ExecDevOps/Docker-CentOS-6.7/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/ExecDevOps/Docker-CentOS-6.7/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h3>
<a id="why-bother-running-a-more-recent-version-of-docker-on-centos-67-than-171" class="anchor" href="#why-bother-running-a-more-recent-version-of-docker-on-centos-67-than-171" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why bother running a more recent version of Docker on CentOS 6.7 than 1.7.1?</h3>

<p>Well, because I like CentOS 6.7. And dislike 7.x, or more precisely, I don't like to have to redo and re-learn everything. 6.7 runs fine for me, and what I have seen and read about systemd has so far not given me goose-bumps of anticipation. </p>

<h3>
<a id="is-it-possible-is-it-stable" class="anchor" href="#is-it-possible-is-it-stable" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Is it possible? Is it stable?</h3>

<p>Possible: definitely. Stable? good question! The kernel I used is the most recent from ElRepo so nothing strange there. Docker is 1.10.3 (the most recent one at the time I write this) and has so far worked well for me. As usual, YMMV and I do not take any responsability for nothing. </p>

<p>The only snag I have come across this far is that devicemapper does not work because of missing support for "udev sync" so no devicemapper here. This lead me to invastigate and try-out AUFS, which I abandoned because of the non-standard kernel that had to be Frankenstein-ed together with the rest of CentOS. Oh, and Docker by default uses devicemapper with loop mouts which seems to be a great way of scaring people away from RH/CentOS/OEL into the Debian/Ubuntu swamps so no loop-mounts either.</p>

<p>Only two storage methods remain: ZFS and BTRFS. ZFS, however great it may be, suffers from a Frankenstein-problem similar to AUFS which left me with BTRFS. People have been crying "Wolf!" over BTRFS for so long now that it has become a self-playing piano. It turned out that BTRFS is a nice companion to Docker, it works well and does not bother me so BTRFS it is then.</p>

<h3>
<a id="but-then-again-why" class="anchor" href="#but-then-again-why" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>But then again, why?</h3>

<p>I run all my VMs on Xenserver (6.5 SP1) on an old (ancient?) HP ML150 G5 with 16 GB RAM / 2 x E5405 quad-core CPUs. Xenserver is free and has all major features one can expect from a hypervisor today. In contrast to the hefty pricetags of a full-blown VMware license or a SCOM--managed Hyper-V, Xenserver is lean, mean, feature-rich, comes with nice management-GUI and costs zero. Built on OpenSource it fits nicely into my ongoing struggle to throw off the MS-chains that has sneaked into our lives the last 20 or so years.</p>

<p>Anyway, back to topic. I want to run a small, lean, fast VM with Docker on Xenserver. The VM needs to be fully integrated into Xenserver regarding i.e. performance monitoring, VM-motion, etc, etc. Xenserver has recently added support for managing Docker containers within VMs, CoreOS being the first supported Docker provider. Now I don't like CoreOS (there is no reasonable rationale behind it, it is just so) which created the need for an alternative. Since there is none (read about RancherOS below), I had to create one of my own, and I started out with my trusty beloved kickstart-based installation of CentOS 6.7 and jumped in. </p>

<p>The result of my hours googling for all kinds of answers is here, I can and do not want to take credit from whoever put up their bits and pieces on the Interwebs, I just summoned my findings here. Enjoy and remember to have fun!</p>

<h3>
<a id="ps-rancheros" class="anchor" href="#ps-rancheros" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>P.S., RancherOS</h3>

<p>Promising, promising indeed! Although built upon Debian/Ubuntu (i think?) I kind of like the way they put it together. This could be the killer Docker-provider OS that I was searching for! Small, easy, secure and if they ever go past the little problem I (and others) stumbled upon with Docker not starting then I will give it a shot. That means that I will try to "enhance" it with the Xenserver Tools necessary for it to become a full-worthy member of Xenserver VMs with performance monitoring and VM motion, etc.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/ExecDevOps/Docker-CentOS-6.7">CentOS 6.7 with Docker 1.10.3</a> is maintained by <a href="https://github.com/ExecDevOps">ExecDevOps</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
